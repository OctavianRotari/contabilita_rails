<%= form_for invoice_new_or_edit  do |form|%>
	<% if invoice_new_or_edit.errors.any? %>
		<%= pluralize(invoice_new_or_edit.errors.count, "error") %> prevented your account from being created:
		<ul>
			<% invoice_new_or_edit.errors.full_messages.each do |error_message| %>
				<li><%= error_message %></li>
			<% end %>
		</ul>
	<% end %>
	<%= form.fields_for :taxable_vat_fields do |builder| %>
		<%= render 'taxable_vat_field_fields', f: builder %>
	<% end %>
	<% if invoice_url_include_new? %>
		<%= default_fields form , :taxable_vat_fields %>
	<% end %>
	<%= link_to_add_fields "Aggiungi imponibile", form , :taxable_vat_fields%>
	<div>
		<%= form.label 'Tipo fattura' %>
		<%= form.select(:type_of_invoice) do %>
			<%= content_tag(:option, 'Attiva' , value: 'attiva') %>
			<%= content_tag(:option, 'Passiva' , value: 'passiva') %>
		<%end%>
	</div>
	<div>
		<%= form.label 'Azienda' %>
		<%= list_of_companies_selected_value(form) %>
	</div>
	<a class="popup-with-form" href="#company-form">Aggiungi azienda</a>
	<div>
		<%= form.label 'Mezzo' %>
		<%= list_of_vehicles_selected_value(form) %>
	</div>
	<a class="popup-with-form" href="#vehicle-form">Aggiungi mezzo</a>
	<div>
		<%= form.label 'Motivo' %>
		<%= form.text_field :reason, require: true %>
	</div>
	<div>
		<%= form.label 'Data emissione fattura' %>
		<%= form.text_field :date_of_issue, require: true %>
	</div>
	<div>
		<%= form.label 'Data scadenza' %>
		<%= form.text_field :deadline, require: true %>
	</div>
	<div>
		<%= form.submit "Conferma" %>
	</div>
<% end %>
<form id="company-form" class="mfp-hide white-popup">
	<h1>Form</h1>
	<%= render "companies/form"   %>
</form>
<form id="vehicle-form" class="mfp-hide white-popup">
	<h1>Form</h1>
	<%= render "vehicles/form"  %>
</form>
