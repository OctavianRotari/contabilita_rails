<%= form_for @invoice, url: invoice_edit_or_new do |form|%>
	<% if @invoice.errors.any? %>
		<%= pluralize(@invoice.errors.count, "error") %> prevented your account from being created:
		<ul>
			<% @invoice.errors.full_messages.each do |error_message| %>
				<li><%= error_message %></li>
			<% end %>
		</ul>
	<% end %>
	<div id="new_taxable_div">
		<input type="button" value="Imponibile" class="new_taxable">
		<input type="button" value="Due imponibili" class="new_taxable">
		<input type="button" value="Tre imponibili" class="new_taxable">
	</div>
	<script>
		$(document).ready(function(){
			$('.new_taxable').click(function(){
				if($(this).attr('value') === 'Imponibile'){
					$('#new_taxable_div').html('<%= escape_javascript(render partial: "invoices/taxable_1", locals: { form: form }) %>');
				} else if($(this).attr("value") === 'Due imponibili'){
					$('#new_taxable_div').html('<%= escape_javascript(render partial: "invoices/taxable_2", locals: { form: form }) %>');
				} else {
					$('#new_taxable_div').html('<%= escape_javascript(render partial: "invoices/taxable_3", locals: { form: form }) %>');
				}
			});
		});
	</script>
	<div>
		<%= form.label 'Tipo fattura' %>
		<%= form.select(:type_of_invoice) do %>
			<%= content_tag(:option, 'Attiva' , value: 'attiva') %>
			<%= content_tag(:option, 'Passiva' , value: 'passiva') %>
		<%end%>
	</div>
	<div>
		<%= form.label 'Mezzo' %>
		<%= form.select(:vehicle_id) do %>
			<% @vehicles.each do |vehicle| %>
				<%= content_tag(:option, vehicle.plate , value: vehicle.id) %>
			<%end%>
			<%= content_tag(:option, 'Officina' , value: 'officina') %>
			<%= content_tag(:option, 'Nessuno' , value: nil) %>
		<%end%>
	</div>
	<div>
		<%= form.label 'Motivo' %>
		<%= form.text_field :reason, require: true %>
	</div>
	<div>
		<%= form.label 'Data emissione fattura' %>
		<%= form.text_field :date_of_issue, require: true %>
	</div>
	<div>
		<%= form.label 'Data scadenza' %>
		<%= form.text_field :deadline, require: true %>
	</div>
	<div>
		<%= form.label 'Pagato' %>
		<%= form.text_field :paid, require: true %>
	</div>
	<div>
		<%= form.label 'Data pagamento' %>
		<%= form.text_field :payment_date, require: true %>
	</div>
	<div>
		<%= form.label 'Tipo di pagamento' %>
		<%= form.text_field :method_of_payment, require: true %>
	</div>
	<div>
		<%= form.submit "Aggiungi fattura" %>
	</div>
<% end %>

